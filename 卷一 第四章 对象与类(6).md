# 卷一 第四章(6)

## 4.7 包

Java允许使用包（package）将类组织起来。

使用包的主要原因是确保类名的唯一性。 可以将公司的因特网域名以逆序的形式作为包名，并且对于不同的项目使用不同的子包。



### 4.7.1 类的导入

一个类可以使用所属包中的所有类，以及所有包中的公有类（public class）。

有两种方式可以访问另一个包中的公有类：

1. 在每个类名之前添加完整的包名。例如：```java.time.LocalDate today = java.time.LocalDate.now();```，明了但是很繁琐。

2. 使用import语句。一旦使用了import语句，在使用类时，就不必写出包的全名了。其中，import语句是一种引用包含在包中的类的简明描述；可以导入一个特定的类或者整个包；并且应该位于源文件的顶部，但位于package语句的后面。

**注**：在包中定位类是编译器的工作。类文件的**字节码**肯定使用**完整的包名**来引用其他类。 



### 4.7.2 静态引入

import语句不仅可以导入类，还增加了导入静态方法和静态域的功能。

1. ```import static 类名.*；```，例如：```import static java.lang.System.*;```，就可以使用System类的静态方法和静态域。```out.println("Hello World!")；```
2. ```import static java.lang.System.out;```，导入特定的方法或域。



### 4.7.3 将类放入包中

1. 一个类放入包中，必须将包的名字放在源文件的**开头第一行**。
2. 如果没有申明package语句，那么这个类就放在默认包（default package）中，这个包是没有名字的包。



### 4.7.4 包作用域

略



## 4.8 类路径

类存储在文件系统的子目录中。

类的**路径**必须与**包名**匹配。

JAR=Java归档

为了使类能够被多个程序共享，需要做到下面几点：

1. 把类放到一个目录中。需要注意，这个目录是包树状结构的基目录。
2. 将JAR文件放在一个目录中。
3. 设置类路径(classpath)。类路径是所有包含类文件的路径的集合。



类路径包括：

1. 基目录。/home/user/classdir或c:\classes
2. 当前目录（.）
3. JAR文件。/home/user/archives/archive.jar或c:\archives\archive.jar

类路径所列出的目录和归档文件是搜寻类的起始点。

编译器定义类中引用的类文件是，会对这个类路径的所有位置中所列出的每一个类进行逐一查看。如果找到了一个以上的类，就产生编译错误（因为类必须是唯一的，而import语句的次序却无关紧要）。



### 4.8.1 设置类路径

1. 最好采用 -classpath（或  -cp）选项指定类路径：```java -classpath /home/user/classdir:.:/home/user/archives/archive.jar MyProg```，整个指令应该书写在一行中。
2. 也可以通过设置CLASSPATH环境变量完成整个操作。Linux：```export CLASSPATH=/home/user/classdir:.:/home/user/archives/archive.jar```；Windows：```set CLASSPATH=c:\classdir;.;c:\archives\archive.jar```

## 4.9 文档注释

JDK中的工具：javadoc，它可以由源文件生成一个HTML文档

### 4.9.1 注释的插入

提取信息位置：

1. 包
2. 公有类与接口
3. 公有的和受保护的构造器及方法
4. 公有的和受保护的域

每个/\**...\*/文档注释在标记之后紧跟着自由格式文本

### 4.9.2 类注释

类注释必须放在import语句之后，类定义之前



### 4.9.3方法注释

每一个方法注释必须放在所描述的方法之前。

标记：

1. @param：变量描述
2. @return：返回描述
3. @throws：抛出异常描述

### 4.9.4 域注释

只需要对公有域（通常指的是静态常量）建立文档

### 4.9.5 通用注释

略

### 4.9.6 包域概述注释

产生包注释，需要在每一个包目录中添加一个单独的文件。

1. 提供一个以package.html命名的HTML文件。
2. 提供一个package-info.java命名的Java文件。第一，必须包含一个初始的以/*\*和\*/界定的Javadoc注释；第二，跟随在包语句之后；第三，不应该包含更多的代码或注释。

### 4.9.10 注释的抽取

使用javadoc -d 生成文档的目录 要生成的包目录

## 4.10 类设计技巧

1. 一定要保证数据私有

2. 一定要对数据初始化

3. 不要在类中使用过多的基本类型

4. 不是所有的域都需要独立的域访问器和域更改器

5. 将职责过多的类进行分解

6. 类名和方法名要体现它们的职责。

   命名类名的良好习惯：

   1. 采用一个名词
   2. 前面有形容词修饰的名词
   3. 动名词修饰的名词

7. 优先使用不可变的量

   1. 如果类时不可变的，就可以安全地在多个线程间共享其对象。
   2. 要尽可能让类是不可变的，这是一个很好的想法。